<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Aura Create</title>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />
		<link rel="stylesheet" type="text/css" href="styling/auraCreate.css">
		<link rel="stylesheet" type="text/css" href="styling/toggleSwitch.css">
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
	</head>
	<body>
		<div class="container-fluid" ng-app="auraCreate" ng-controller="myCtrl" ng-init="init()" ng-cloak id="MAIN">
			<div id="alert"></div>
			<!-- Modal for asking user confirmation-->
			<div class="modal fade" id="confirmModal" role="dialog">
				<div class="modal-dialog modal-sm">
				  <!-- Modal content-->
				  <div class="modal-content">
				    <div class="modal-header bg-danger text-center" style="padding:1em 2em;">
				      <button type="button" class="close" data-dismiss="modal">&times;</button>
				      <h3><b>Attention</b></h3>
				    </div>
				    <div class="modal-body text-left" style="padding:1em 1em;">
				    	<h4>&nbsp;&nbsp;&nbsp;&nbsp;{{confirmMessage}}</h4>
				    </div>
				    <div class="modal-footer">
				    	<label id="acceptConfirm" type="button" class="btn btn-success pull-right" data-dismiss="modal" style="margin-left: 1em;">Accept</label>
				    	<label id="cancelConfirm" type="button" class="btn btn-danger pull-right" data-dismiss="modal">Cancel</label>
				    </div>
				  </div>
				</div>
			</div>

			<div class="row page-header" id="banner">
				<div class="col-xs-9 col-sm-6 col-md-6 col-lg-6">
					<img ng-src="images/aura_logo.png" alt="Aura Logo" class="img-responsive pull-left logo" ng-click="changeView('dashboard', '')"/>
					<h1 id="pageTitle"><b style="cursor: pointer;" ng-click="changeView('dashboard', '')">Create</b></h1>
				</div>
				<div class="col-xs-3 col-sm-6 col-md-6 col-lg-6">
					<a ng-click="changeView('profileSettings', '' )" class="btn btn-info btn-sm pull-right" id="profileButton">
						<span class="hidden-xs">{{userName}}</span>
		          		<span class="glyphicon glyphicon-user"></span>
		        	</a>	
				</div>
			</div> 
		
			<!-- Main Content -->
			<div class="container-fluid row well well-lg" id="mainContentContainer">
				<!-- User Organizations Menu -->
			 	<div class="col-xs-12 col-sm-3 col-md-3 col-lg-2" id="orgMenu">
			 		<div class="hidden-xs panel-group" id="accordion">
				 		<!-- Creates a navigation list for each organization the user is in control of -->
				 		<div ng-repeat="organization in organizationsArray| orderBy: name" class="panel panel-success">
						    <div class="panel-heading">
						      <h4 class="panel-title">
						        <a data-toggle="collapse" data-parent="#accordion" href="#{{$index}}" ng-click="cacheOrgData(organization)">
						        	<h2><strong>{{organization.name}}</strong></h2>
						        </a>
						      </h4>
						    </div>
						    <div id="{{$index}}" class="panel-collapse collapse container-fluid zeroPadding">
						      <div class="panel-body list-group zeroPadding">
						      		<li ng-click="changeView('beaconsList', organization)" class="menuItem list-group-item list-group-item-info">
					 					<h2 class="menuName"><small>Beacons</small></h2>
						 			</li>

						 			<li ng-click="changeView('objectsList', organization)" class="menuItem list-group-item list-group-item-info" >
						 				<h2 class="menuName"><small>Objects</small></h2>
						 			</li>

						 			<li ng-click="changeView('settings', organization)" class="menuItem list-group-item list-group-item-info">
						 				<h2 class="menuName"><small>Settings</small></h2>
						 			</li>

						 			<li ng-click="changeView('stats', organization)" class="menuItem list-group-item list-group-item-info">
						 				<h2 class="menuName"><small>Stats</small></h2>
						 			</li>
						 		</div>
						 	</div>
				 		</div>
				 	</div>
			 		<div class="container-fluid visible-xs text-center">
			 			<div class="container-fluid" id="mobileOrgMenu">
			 				<h4>Organizations</h4>
			 			</div>
 						<!-- Carousel of organizations -->
		 				<div id="orgsCarousel" class="carousel slide" data-ride="carousel" data-interval="false">
							 <!-- Indicators -->
							  <ol class="carousel-indicators">
							    <li data-target="#orgsCarousel" data-slide-to="0" class="active"></li>
							    <li ng-repeat="organization in organizationsArray | orderBy: name" ng-if="$index > 0" data-target="#orgsCarousel" data-slide-to="{{$index}}"></li>
							  </ol>

							  <!-- Organization -->
							  <div class="carousel-inner">
							  	<div class="item active text-center text-info">
									<h3>{{organizationsArray[0].name}}</h3>
							    </div>

							    <div class="item text-center text-info" ng-repeat="organization in organizationsArray | orderBy: name" ng-if="$index > 0">
									<h3>{{organization.name}}</h3>
							    </div>
							  </div>

							  <!-- Left and right controls -->
							  <a class="left carousel-control" href="#orgsCarousel" data-slide="prev" ng-click="carouselLeft()">
							    <span class="glyphicon glyphicon-chevron-left"></span>
							    <span class="sr-only">Previous</span>
							  </a>
							  <a class="right carousel-control" href="#orgsCarousel" data-slide="next" ng-click="carouselRight()">
							    <span class="glyphicon glyphicon-chevron-right"></span>
							    <span class="sr-only">Next</span>
							  </a>
						</div>
						<div class="btn-group btn-group-justified" style="font-size: 10px;">
							<a class="btn btn-info" ng-click="carouselViewController('beaconsList')" style="border-radius: 0;">Beacons</a>
							<a class="btn btn-info" ng-click="carouselViewController('objectsList')" style="border-radius: 0;">Objects</a>
							<a class="btn btn-info" ng-click="carouselViewController('settings')" style="border-radius: 0;">Settings</a>
							<a class="btn btn-info" ng-click="carouselViewController('stats')" style="border-radius: 0;">Stats</a>
						</div>
					</div>
			 	</div>

			 	<!-- Dynamic Section -->
			 	<div class="col-xs-12 col-sm-9 col-md-9 col-lg-10 container-fluid">
			 		<!-- Dynamic Title -->
			 		<div class="row text-center panel panel-heading" id="liveTitle">
			 			<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-left text-primary">
			 				<h3><b>{{primTitle}}</b></h3>
			 			</div>
					    <div ng-switch="filterTitle" id="filterTitle" class="col-xs-4 col-sm-4 col-md-4 col-lg-4 center-block text-center">
					    	<!-- Objects View Filter -->
						    <div ng-switch-when="objectsView" class="btn-group btn-group-vertical">
					    		<div class="dropup btn-group">
									 <button class="btn btn-sm btn-info dropdown-toggle" type="button" data-toggle="dropdown" role="menu" aria-labelledby="menu1">
								    	View By: {{viewType}}
								    	<span class="caret"></span>
								    </button>
								    <ul class="dropdown-menu">
								    	<li class="menuItem" ng-click="changeViewType('List')">
								    		<a><h5>List</h5></a>
								    	</li>
								    	<li class="menuItem" ng-click="changeViewType('Map')">
								    		<a><h5>Map</h5></a>
								    	</li>
								    </ul>
							    </div>
					    		<div class="btn-group">
							    	<button class="btn btn-sm btn-info dropdown-toggle" type="button" data-toggle="dropdown" role="menu" aria-labelledby="menu1">
								    	Filter by Beacon: {{beaconsFilter}}
								    	<span class="caret"></span>
								    </button>
								    <ul class="dropdown-menu">
								    	<li class="text-center" ng-click="changeBeaconFilter('All')">
								    		<a><h5>Show All</h5></a>
								    	</li>
								    	<li class="divider"></li>
								    	<li class="text-center" ng-repeat="arObject in objectsArray | removeDuplicates: 'objectsArray'" ng-click="changeBeaconFilter(arObject.beacon_name)">
								      		<a><h5>{{arObject.beacon_name}}</h5></a>
								    	</li>
								    </ul>
								</div>
						    </div>

						    <!-- Object View Filter -->
						    <div ng-switch-when="objectPrivacy" class="text-center">
						    	<label class="switch">
									<input type="checkbox">
									<div class="slider round"></div>
								</label>
						    </div>

						    <!-- Beacons View Filter -->
						    <div ng-switch-when="beaconsView" style="margin-top: 1em;">
						    	<div class="btn-group">
						    		<label type="button" class="btn btn-success" data-toggle="modal" data-target="#addBeaconModal" ng-click="loadGoogleScript()">
						    			<span class=" glyphicon glyphicon-plus"></span>
						    			<span class="hidden-xs hidden-sm">Beacon</span>
							    	</label>
							    	<div class="btn-group">
							    		<button class="btn btn-info dropdown-toggle" type="button" data-toggle="dropdown" role="menu" aria-labelledby="menu1">
								    	View By: {{viewType}}
								    	<span class="caret"></span>
									    </button>
									    <ul class="dropdown-menu">
									    	<li class="text-center menuItem" ng-click="changeViewType('List')">
									    		<a><h5>List</h5></a>
									    	</li>
									    	<li class="text-center menuItem" ng-click="changeViewType('Map')">
									    		<a><h5>Map</h5></a>
									    	</li>
									    </ul>
							    	</div>
						    	</div>
							</div>
						</div>

						<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-right">
					    	<h2><small>{{secTitle}}</small></h2>
					    </div>
			 		</div>

			 		<!-- Live Display -->
			 		<div ng-switch="curView" id="liveDisplay" class="container-fluid panel">
			 			<!-- Dashboard -->
			 			<div ng-switch-when="dashboard" class="panel-body text-primary">
			 				<h2># Organizations: {{numOrganizations}}</h2>
			 				<h2># Beacons: {{numBeacons}}</h2>
			 				<h2># Objects: {{numObjects}}</h2>
			 				<h2>Average Throughput: {{avgThroughput}}</h2>
			 			</div>

			 			<!-- Profile Settings -->
			 			<div ng-switch-when="profileSettings" class="text-center panel-body">
			 				<div class="row" style="padding-bottom: 2em;">
			 					<!-- Organization Management -->
			 					<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 pull-left">
			 						<!-- Organization Management -->
			 						<h2 class="text-primary"><b>Organization Management</b></h2>

					 				<!-- Creating an organization -->
					 				<label type="button" class="btn btn-success btn-lg" data-toggle="modal" data-target="#addOrgModal">Add Organization</label>

					 				<label type="button" class="btn btn-danger btn-lg" data-toggle="modal" data-target="#removeOrgModal">Delete Organization</label>
			 					</div>

			 					<!-- Webcam -->
			 					<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 pull-right">
			 						<!-- Webcam -->
			 						<h2 class="text-primary"><b>Will's Webcam</b></h2>
				 					<label class="btn btn-info btn-lg" data-toggle="modal" data-target="#webcamModal">View</label>
			 					</div>
			 				</div>

			 				<!-- Webcam Modal -->
							  <div class="modal fade" id="webcamModal" role="dialog">
							    <div class="modal-dialog">
							      <!-- Modal content-->
							      <div class="modal-content">
							        <div class="modal-header" style="padding:2em 3em;">
							          <button type="button" class="close" data-dismiss="modal">&times;</button>
							          <h3><b>Will's Webcam</b></h3>
							        </div>
							        <div class="modal-body" style="padding:2em 3em;">
							        	<iframe src="http://10.0.1.1:8009?action=stream" style="height: 20em; width: 30em;">
			 							</iframe>
							        </div>
							        <div class="modal-footer">
							          <button type="submit" class="btn btn-info pull-right" data-dismiss="modal">Close</button>
							        </div>
							      </div>
							    </div>
							  </div>
			 				
			 				<!-- Modal for creating an organization-->
							  <div class="modal fade" id="addOrgModal" role="dialog">
							    <div class="modal-dialog">
							    
							      <!-- Modal content-->
							      <div class="modal-content">
							        <div class="modal-header" style="padding:2em 4em;">
							          <button type="button" class="close" data-dismiss="modal">&times;</button>
							          <h3><b>Organization creation for {{userName}}</b></h3>
							        </div>
							        <div class="modal-body" style="padding:2em 4em;">
							          <form role="form">
							            <div class="form-group">
							              <label>Name</label>
							              <input type="text" class="form-control" placeholder="Enter organization's name" ng-model="addOrgName" required>
							            </div>
							            <div class="form-group">
							              <label>Description</label>
							              <input type="text" class="form-control" placeholder="Enter organization's description" ng-model="addOrgDesc" required>
							            </div>
							            <button type="submit" class="btn btn-success btn-block" ng-click="addOrganization(addOrgName, addOrgDesc)" data-dismiss="modal">Create</button>
							          </form>
							        </div>
							        <div class="modal-footer">
							          <button type="submit" class="btn btn-info pull-right" data-dismiss="modal">Close</button>
							        </div>
							      </div>
							    </div>
							  </div>

							  <!-- Modal for deleting an organization-->
							  <div class="modal fade" id="removeOrgModal" role="dialog">
							    <div class="modal-dialog">
							    
							      <!-- Modal content-->
							      <div class="modal-content">
							        <div class="modal-header" style="padding:2em 3em;">
							          <button type="button" class="close" data-dismiss="modal">&times;</button>
							          <h3><b>Organization deletion for {{userName}}</b></h3>
							        </div>
							        <div class="modal-body" style="padding:2em 7em;">
							          <form role="form">
							            <div class="form-group">
							            	<ul class="list list-unstyled">
								        		<li ng-repeat="organization in organizationsArray" class="panel panel-primary">
							        				<h4 class="panel-heading" style="margin-top: 0;" data-dismiss="modal">{{organization.name}}</h4>
							        				<div class="panel-body text-left">
							        					<label class="label label-info">Description:</label>
							        					<h5 style="display:inline;">{{organization.description}}</h5>
							        				</div>
							        				<div class="panel-footer text-center">
							        					<label class="btn btn-danger text-center" ng-click="removeOrganization(organization)">Delete <span class="glyphicon glyphicon-remove"></span></label>
							        				</div>
								        		</li>
								        	</ul>
							            </div>
							          </form>
							        </div>
							        <div class="modal-footer">
							          <button type="submit" class="btn btn-info pull-right" data-dismiss="modal">Close</button>
							        </div>
							      </div>
							      
							    </div>
							  </div>  
			 			</div>

			 			<!-- Beacons List -->
			 			<div ng-switch-when="beaconsList">
			 				<div ng-switch="viewType" class="panel-body">
			 					<div ng-switch-when="List" class="table-responsive">
					 				<table class="table table-condensed">
						 				<thead>
						 					<tr class="row">
						 						<th>Name</th>
						 						<th>Associated</th>
						 						<th>Type</th>
						 						<th class="hidden-sm hidden-xs">Altitude</th>
						 						<th class="hidden-sm hidden-xs">Latitude</th>
						 						<th class="hidden-sm hidden-xs">Longitude</th>
						 						<th></th>
						 					</tr>
						 				</thead>
						 				<tbody ng-repeat="beacon in beaconsArray | orderBy:'beacon_name'">
						 					<tr class="row">
						 						<td ng-click="displayBeacon(beacon)" class="menuItem">{{beacon.beacon_name}}</td>
						 						<td class="menuItem">{{beacon.associated}}</td>
						 						<td class="menuItem">{{beacon.beacon_type}}</td>
						 						<td class="menuItem hidden-sm hidden-xs">{{beacon.altitude | number: 3}}</td>
						 						<td class="menuItem hidden-sm hidden-xs">{{beacon.latitude | number: 3}}</td>
						 						<td class="menuItem hidden-sm hidden-xs">{{beacon.longitude | number: 3}}</td>
						 						<td>
						 							<span class="glyphicon glyphicon-remove deleteIcon" ng-click="removeBeacon(beacon)"></span>
						 						</td>
						 					</tr>
						 				</tbody>
						 			</table>
						 		</div>
					 			<div ng-switch-when="Map">
					 				<!-- Google Maps API -->
					 				<div class="center-block panel text-center">
					 					<div id="googleMapsBeacons"></div>
					 				</div>
					 			</div>
					 		</div>
			 			</div>

			 			<!-- Beacon (Singular) -->
		 				<!-- Google Maps API -->
		 				<div ng-switch-when="beacon">
		 					<div class="text-center center-block panel-body">
			 					<div class="panel-heading container-fluid">
			 						<div class="row">
			 							<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-left text-primary"> 
			 								<label class="btn btn-info" type="button" data-toggle="modal" data-target="#typeEditModal" style="margin-top: 0.5em;">Type: {{curBeacon.beacon_type}}</label>						
			 							</div>
			 							<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-center text-primary">
			 								<h4 class="text-primary">Associated: {{curBeacon.associated}}</h4>
			 							</div>
				 						<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-right">
				 							<label class="btn btn-info" type="button" ng-click="displayBeaconObjects()" style="margin-top: 0.5em;">Objects Served</label>
				 						</div>
				 					</div>
			 					</div>
			 					<div class="panel-body" id="googleMapsBeacon"></div>
			 					<div class="panel-footer">
			 						<div class="row">
			 							<h4 class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-left text-primary">Altitude: {{curBeacon.altitude | number: 3}}</h4>
					 					<h4 class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-center text-primary">Latitude: {{curBeacon.latitude | number: 3}}</h4>
					 					<h4 class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-right text-primary">Longitude: {{curBeacon.longitude | number: 3}}</h4>
			 						</div>
			 					</div>
			 				</div>

			 				  <!-- Modal for editing a beacon's type-->
							<div class="modal fade" id="typeEditModal" role="dialog">
							    <div class="modal-dialog">
							      <!-- Modal content-->
							      <div class="modal-content">
							        <div class="modal-header text-primary text-center" style="padding:2em 3em;">
							          <button type="button" class="close" data-dismiss="modal">&times;</button>
							          <h3><b>Type Editing for {{curBeacon.beacon_name}}</b></h3>
							        </div>
							        <div class="modal-body" style="padding:2em 5em;">
							          <form role="form">
							          	<div class="form-group form-group-sm">
							            	<label>Type:</label>
										    <select ng-model="newBeaconType" class="form-control" required>
										    	<option value="" disabled selected hidden>{{curBeacon.beacon_type}}</option>
										    	<option ng-repeat="type in beaconTypes" value={{type}}>{{type}}</option>
										    </select>
							            </div> 
							            <button type="submit" class="btn btn-success btn-block" ng-click="updateBeaconType(newBeaconType)" data-dismiss="modal">Create</button>
							          </form>
							        </div>
							        <div class="modal-footer">
							          <button type="submit" class="btn btn-info pull-right" data-dismiss="modal">Close</button>
							        </div>
							      </div>
							    </div>
							</div>
		 				</div>

			 			<!-- Objects List -->
			 			<div ng-switch-when="objectsList">
			 				<div ng-switch="viewType">
				 				<div ng-switch-when="List" class="panel-body">
					 				<table class="table table-condensed table-responsive">
						 				<thead>
						 					<tr>
						 						<th>Thumbnail</th>
						 						<th>Name</th>
						 						<th>Beacon Name</th>
						 						<th class="hidden-xs hidden-sm">#Images</th>
						 						<th class="hidden-xs hidden-sm">#Audio</th>
						 						<th class="hidden-xs hidden-sm">#Video</th>
						 						<th class="hidden-xs hidden-sm">#3D</th>
						 						<th></th>
						 					</tr>
						 				</thead>
						 				<tbody>
						 					<tr ng-repeat="arObject in objectsArray | filterByBeacon: beaconsFilter | orderBy: 'beacon_name'">
						 						<td class="menuItem" ng-click="displaythumbNailModal(arObject)">
						 							<img ng-src="{{arObject.thumbnail}}" class="thumbnail" alt="{{arObject.name}}"></img>
						 						</td>
						 						<td ng-click="displayObject(arObject)" class="menuItem">{{arObject.name}}</td>
						 						<td ng-click="loadBeacon(arObject.beacon_name)" class="menuItem">{{arObject.beacon_name}}</td>
						 						<td class="menuItem hidden-xs hidden-sm">{{arObject.numImage}}</td>
						 						<td class="menuItem hidden-xs hidden-sm">{{arObject.numAudio}}</td>
						 						<td class="menuItem hidden-xs hidden-sm" >{{arObject.numVideo}}</td>
						 						<td class="menuItem hidden-xs hidden-sm">{{arObject.num3D}}</td>
						 						<td>
						 							<span class="glyphicon glyphicon-remove deleteIcon" ng-click="removeObject(arObject)"></span>
						 						</td>
						 					</tr>
						 				</tbody>
						 			</table>
								 	<!-- Thumbnail Modal -->
						 			<div class="modal fade" id="thumbnailModal" role="dialog" data-backdrop="true">
									    <div class="modal-dialog">
									    
									      <!-- Thumbnail Modal content-->
									      <div class="modal-content">
									        <div class="modal-header">
									          <button type="button" class="close" data-dismiss="modal">&times;</button>
									          <h3 class="modal-title"><strong>{{modalHeader}}</strong></h3>
									        </div>
									        <div class="modal-body text-center">
									          <img class="img-rounded" ng-src={{modalImgSrc}}></img>
									        </div>
									        <div class="modal-footer">
									        	<ul class="list-inline text-center">
									        		<li>#Images: {{curObj.numImage}}</li>
									        		<li>#Audio: {{curObj.numAudio}}</li>
									        		<li>#Video: {{curObj.numVideo}}</li>
									        		<li>#3D: {{curObj.num3D}}</h4></li>				
									        	</ul>
									          <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
									        </div>
									      </div>  
									    </div>
									</div>
								</div>
								<!-- Google Maps API -->
				 				<div ng-switch-when="Map" class="center-block panel text-center">
				 					<div id="googleMapsObjects"></div>
				 				</div>
							</div>
			 			</div>

			 			<!-- Object (Singular) -->
			 			<!-- Google Maps API -->
		 				<div ng-switch-when="object" class="center-block panel-body text-center">
		 					<div class="panel-heading center-block">
		 						<div class="row">
		 							<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-left">
		 								<div class="btn-group">
			 								<label class="btn btn-info" type="button" ng-click="loadBeacon(curObj.beacon_name)">Beacon: {{curObj.beacon_name}}</label>
			 								<label class="btn btn-warning" data-toggle="modal" data-target="#editBeacForObjModal">
			 									<span class="glyphicon glyphicon-pencil"></span>
			 								</label>
		 								</div>
		 							</div>
		 							<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-center center-block">
		 								<div class="btn-group">
		 									<label class="btn btn-success" type="button" data-toggle="modal" ng-click="resetAssetsForm()" data-target="#newAssetsModal">
									          <span class="glyphicon glyphicon-plus"></span> 
									        </label>
		 									<button class="btn btn-info" type="button" ng-click="displayAssetsModal()">Media</button>
									        <label class="btn btn-danger" type="button" data-toggle="modal" data-target="#deleteAssetsModal" ng-click="setAssets()">
									        	<span class="glyphicon glyphicon-minus"></span> 
									        </label>
									    </div>
		 							</div>
			 						<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-right">
			 							<button class="btn btn-info" type="button" ng-click="displayDescriptionModal()">Description</button>
			 						</div>
			 					</div>
		 					</div>
		 					<div class="panel-body" id="googleMapsObject"></div>
		 					<div class="panel-footer">
		 						<div class="row">
				 					<h4 class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-left text-primary">Altitude: {{curObj.altitude | number: 3}}</h4>
				 					<h4 class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-center text-primary">Latitude: {{curObj.latitude | number: 3}}</h4>
				 					<h4 class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-right text-primary">Longitude: {{curObj.longitude | number: 3}}</h4>
				 				</div>
		 					</div>

		 					<!-- Edit Beacon for Object Modal -->
				 			<div class="modal fade" id="editBeacForObjModal" role="dialog" data-backdrop="true">
							    <div class="modal-dialog">
							      <!-- Edit Beacon for Object Modal content-->
							      <div class="modal-content">
							        <div class="modal-header text-primary" style="padding:2em 4em;">
							          <button type="button" class="close" data-dismiss="modal">&times;</button>
							          <h3 class="modal-title"><strong>Change {{curObj.name}}'s service beacon</strong></h3>
							        </div>
							        <div class="modal-body text-center" style="padding:2em 3em;">
							          
							        </div>
							        <div class="modal-footer">
							          <button type="button" class="btn btn-info pull-right" data-dismiss="modal">Close</button>
							        </div>
							      </div>
							    </div>
							</div>

		 					<!-- Description Modal -->
				 			<div class="modal fade" id="descriptionModal" role="dialog" data-backdrop="true">
							    <div class="modal-dialog" >
							      <!-- Description Modal content-->
							      <div class="modal-content">
							        <div class="modal-header text-primary" style="padding:2em 3em;">
							          <button type="button" class="close" data-dismiss="modal">&times;</button>
							          <h3 class="modal-title"><strong>{{curObj.name}}</strong></h3>
							        </div>
							        <div class="modal-body text-left" style="padding:2em 3em; margin-bottom: 0;">
							          <p>&nbsp;&nbsp;&nbsp;&nbsp;{{curObj.description}}</p>
							        </div>
							        <div class="modal-footer">
							          <button type="button" class="btn btn-info pull-right" data-dismiss="modal">Close</button>
							        </div>
							      </div>
							    </div>
							</div>

							<!-- Asset Creation Modal -->
							<div class="modal fade" id="newAssetsModal" role="dialog">
							    <div class="modal-dialog">
							    
							      <!-- Modal content-->
							      <div class="modal-content">
							        <div class="modal-header" style="padding:2em 3em;">
							          <button type="button" class="close" data-dismiss="modal">&times;</button>
							          <h3 class="text-primary"><b>New Media Content for {{curObj.name}}</b></h3>
							        </div>
							        <div class="modal-body" style="padding:2em 3em;">
							          <form role="form" class="form">
							            <div class="form-group well well-sm">
						            		<h4 class="text-primary">Import image, audio, or video files:</h4>
						            		<label class="btn btn-info" for="assetFiles">
											    <input id="assetFiles" type="file" style="display:none;" accept="image/*|audio/*|video*" custom-on-change="uploadFile" required multiple="true"></input>
											    Browse
											</label>
							            </div>
							            <div class="form-group well well-sm form-horizontal">
							              <h4 class="text-primary">Enter a title for each file:</h4>
							            	<ul class="list list-unstyled">
							            		<li ng-if="files.length < 1" class='label label-warning float-left'>No files chosen.</li>
							            		<li ng-repeat="file in files" style="margin-bottom: 1em;">
							            			<label class="label label-warning" id="fileLabel">
							            				{{file.name}}
												        <span class="glyphicon glyphicon-remove pull-right cancelFile" ng-click="removeFile($index)"></span>
							            			</label>
							            			<input type="text" class="form-control input-sm" placeholder="Enter title" ng-model="fileNames[$index]" style="width:66%;" required></input>
							            		</li>
							            	</ul>
							            </div>	
							            <button type="submit" class="btn btn-success btn-block" ng-click="multiFileUpload()" data-dismiss="modal">Upload</button>
							          </form>
							        </div>
							        <div class="modal-footer">
							          <button type="submit" class="btn btn-info pull-right" data-dismiss="modal">Close</button>
							        </div>
							      </div>
							    </div>
							</div>

							<!-- Asset Deletion Modal -->
				 			<div class="modal fade" id="deleteAssetsModal" role="dialog" data-backdrop="true">
							    <div class="modal-dialog">
							    
							      <!-- Asset Deletion Modal content-->
							      <div class="modal-content">
							        <div class="modal-header text-primary">
							          <button type="button" class="close" data-dismiss="modal">&times;</button>
							          <h3 class="modal-title"><strong>Media deletion for {{curObj.name}}</strong></h3>
							        </div>
							        <div class="modal-body" style="padding:2em 7em;">
							        	<ul class="list list-unstyled">
							        		<li ng-repeat="asset in curAssets" class="panel panel-primary">
						        				<h4 class="panel-heading" style="margin-top: 0; 	">{{asset.name}}</h4>
						        				<img class="img-thumbnail panel-body" src="{{asset.thumbnail}}" alt="{{asset.name}}" style="margin-bottom: 0.5em;"></img>
						        				<div class="panel-footer">
						        					<label class="btn btn-danger text-center" ng-click="removeAsset(asset)">Delete <span class="glyphicon glyphicon-remove"></span></label>
						        				</div>
							        		</li>
							        	</ul>
							        </div>
							        <div class="modal-footer">
							          <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
							        </div>
							      </div>
							    </div>
							</div>

			 				<!-- Assets/Media Modal -->
							<div class="modal fade" id="assetsModal" role="dialog" data-backdrop="true">
								<div class="modal-dialog modal-lg">

									<!-- Assets/Media Modal content-->
									<div class="modal-content">
										<div class="modal-header text-primary">
										  <button type="button" class="close" data-dismiss="modal">&times;</button>
										  <h3 class="modal-title"><strong>{{curObj.name}}</strong></h3>
										</div>
										<div class="modal-body text-center">
											<!-- Assets/Media Carousel -->
											<div id="assetsCarousel" class="carousel slide" data-ride="carousel">

											  <!-- Indicators -->
											  <ol class="carousel-indicators">
											    <li data-target="#assetsCarousel" data-slide-to="0" class="active"></li>
											    <li ng-repeat="asset in assets" ng-if="$index > 0" data-target="#assetsCarousel" data-slide-to="{{$index}}"></li>
											  </ol>

											  <!-- Media Content -->
											  <div class="carousel-inner carouselBody">
											  	<div class="item active">
											      <img ng-show="imageFilter" ng-if="assets[0].content_type == 'image'" ng-src={{assets[0].value}} alt={{assets[0].name}} class="objectMedia center-block img-rounded">

											      <audio ng-show="audioFilter" ng-if="assets[0].content_type == 'audio'" class="objectMedia center-block" src="" autobuffer autoloop loop controls></audio>

											      <video ng-show="videoFilter" ng-if="assets[0].content_type == 'video'" class="objectMedia center-block" src="" autobuffer autoloop loop controls poster=""></video>

											      <!-- 3D Placeholder -->

											       <div class="carousel-caption">
													<h3>{{assets[0].name}}</h3>
												   </div>
											    </div>

											    <div class="item" ng-repeat="asset in assets" ng-if="$index > 0">
											      <img ng-show="imageFilter" ng-if="assets[$index].content_type == 'image'" ng-src={{assets[$index].value}} alt={{assets[$index].name}} class="objectMedia center-block img-rounded">

											      <audio ng-show="audioFilter" ng-if="assets[$index].content_type == 'audio'" class="objectMedia center-block" src="" autobuffer autoloop loop controls></audio>

											      <video ng-show="videoFilter" ng-if="assets[$index].content_type == 'video'" class="objectMedia center-block" src="" autobuffer autoloop loop controls poster=""></video>

											      <!-- 3D Placeholder -->

											       <div class="carousel-caption">
													<h3>{{assets[$index].name}}</h3>
												   </div>
											    </div>
											  </div>

											  <!-- Left and right controls -->
											  <a class="left carousel-control" href="#assetsCarousel" data-slide="prev">
											    <span class="glyphicon glyphicon-chevron-left"></span>
											    <span class="sr-only">Previous</span>
											  </a>
											  <a class="right carousel-control" href="#assetsCarousel" data-slide="next">
											    <span class="glyphicon glyphicon-chevron-right"></span>
											    <span class="sr-only">Next</span>
											  </a>
											</div>
										</div>
										<div class="modal-footer container-fluid">
											<div class="row" style="padding-left: 1em; padding-right: 1em;">
												<form class="pull-left text-primary">
													<span>Media Filter: </span>
												    <label class="checkbox-inline">
												      <input type="checkbox"  ng-model="imageFilter">Image
												    </label>
												    <label class="checkbox-inline">
												      <input type="checkbox" ng-model="audioFilter">Audio
												    </label>
												    <label class="checkbox-inline">
												      <input type="checkbox" ng-model="videoFilter">Video
												    </label>
												    <label class="checkbox-inline">
												      <input type="checkbox" ng-model="threeDFilter">3D
												    </label>
											   </form>
											   <button type="button" class="btn btn-info pull-right" data-dismiss="modal">Close</button>
											</div>
										</div>
								   	</div>
							    </div>
							</div>
			 			</div>

			 			<!-- Settings -->
			 			<div ng-switch-when="settings" class="container-fluid text-center">
			 				<div class="row" style="padding-bottom: 2em;">
			 					<!-- Beacon Management -->
			 					<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 pull-left">
			 						<h2 class="text-primary"><b>Beacon Management</b></h2>

			 						<!-- Creating a beacon -->
			 						<button type="button" class="btn btn-lg btn-success" data-toggle="modal" data-target="#addBeaconModal" ng-click="loadGoogleScript()">Add Beacon</button>

			 						<!-- Removing a beacon -->
									<button type="button" class="btn btn-lg btn-danger" data-toggle="modal" data-target="#removeBeaconModal">Delete Beacons</button>
			 					</div>

			 					<!-- Object Management -->
			 					<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 pull-right">
			 						<h2 class="text-primary"><b>Object Management</b></h2>

			 						<!-- Creating a object -->
			 						<button type="button" class="btn btn-lg btn-success" data-toggle="modal" data-target="#addObjectModal" ng-click="displayAddObjectModal()">Add Object</button>

			 						<!-- Removing an object -->
									<button type="button" class="btn btn-lg btn-danger" data-toggle="modal" data-target="#removeObjectModal">Delete Objects</button>
			 					</div>
			 				</div>

			 				<!-- Modal for creating an object-->
							<div class="modal fade" id="addObjectModal" role="dialog">
							    <div class="modal-dialog">
							    
							      <!-- Modal content-->
							      <div class="modal-content">
							        <div class="modal-header text-primary" style="padding:2em 3em;">
							          <button type="button" class="close" data-dismiss="modal">&times;</button>
							          <h3><b>Object creation for {{curOrg.name}}</b></h3>
							        </div>
							        <div class="modal-body" style="padding:2em 3em;">
							          <form role="form">
							            <div class="form-group">
							              <label>Name:</label>
							              <input type="text" class="form-control" placeholder="Enter object's name" ng-model="addObjectName" required>
							            </div>
							            <div class="form-group">
							              <label>Description:</label>
							              <textarea type="text" class="form-control" placeholder="Enter object's description" ng-model="addObjectDesc" rows=3 required style="resize: none;"></textarea>
							            </div>
							            <div class="form-group">
							            	<label>Thumbnail:</label><br>
							            	<div class="panel panel-default">
							            		<label class="panel-body">
								            		<label class="btn btn-info" for="thumbnailSelect">
													    <input id="thumbnailSelect" type="file" style="display:none;" custom-on-change="updateThumbnailLabel" accept="image/*" required>
													    Browse
													</label>
													<span class='label label-warning'>{{curThumbnail}}</span>
												</label>
							            	</div>
							            </div>
							            <div class="form-group panel panel-default text-center">
							            	<h4><label>Location</label></h4>
							            	<div id="googleMapsAddObject" class="panel-body">
							            	</div>
							            	<h5 class="panel-body zeroPadding">Click a position on the map to the determine the object's location.</h5>
							            	<h6 class="panel-body text-muted zeroPadding">Note: Blue circles indicates a beacon's maximum service range.</h6>
							            </div>
							            <button type="submit" class="btn btn-success btn-block" ng-click="thumbnailResize(addObjectName, addObjectDesc)" data-dismiss="modal">Create</button>
							          </form>
							        </div>
							        <div class="modal-footer">
							          <button type="submit" class="btn btn-info pull-right" data-dismiss="modal">Close</button>
							        </div>
							      </div>
							    </div>
							</div>

							<!-- Modal for creating a beacon for an object out of range of others -->
							  <div class="modal fade" id="beaconForObjectModal" role="dialog">
							    <div class="modal-dialog">
							    
							      <!-- Modal content-->
							      <div class="modal-content">
							        <div class="modal-header text-primary" style="padding:2em 3em;">
							          <button type="button" class="close" data-dismiss="modal">&times;</button>
							          <h3><b>Beacon creation for {{curOrg.name}}</b></h3>
							        </div>
							        <div class="modal-body" style="padding:2em 3em;">
							          <form role="form">
							            <div class="form-group">
							              <label>Name</label>
							              <input type="text" class="form-control" placeholder="Enter beacon's name" ng-model="addBeaconForObjectName" required>
							            </div>
							            <div class="form-group form-group-sm">
							            	<label>Type:</label>
										    <select ng-model="addBeaconForObjectType" class="form-control" required>
										    	<option value="" disabled selected hidden>Select beacon type</option>
										    	<option ng-repeat="type in beaconTypes" value={{type}}>{{type}}</option>
										    </select>
							            </div> 
							            <label class="label label-warning">Location pre-determined from the new object's location.</label>
							            <button type="submit" class="btn btn-success btn-block" ng-click="addBeaconForObject(addBeaconForObjectName, addBeaconForObjectType)" data-dismiss="modal">Create</button>
							          </form>
							        </div>
							        <div class="modal-footer">
							          <button type="submit" class="btn btn-info pull-right" data-dismiss="modal">Close</button>
							        </div>
							      </div>
							    </div>
							</div>

							<!-- Modal for removing a beacon -->
							  <div class="modal fade" id="removeBeaconModal" role="dialog">
							    <div class="modal-dialog">
							    
							      <!-- Modal content-->
							      <div class="modal-content">
							        <div class="modal-header text-primary" style="padding:2em 3em;">
							          <button type="button" class="close" data-dismiss="modal">&times;</button>
							          <h3><b>Beacon deletion for {{curOrg.name}}</b></h3>
							        </div>
							        <div class="modal-body" style="padding:2em 7em;">
							          <form role="form">
							          	<div class="form-group">
							          		<ul class="list list-unstyled">
								        		<li ng-repeat="beacon in beaconsArray" class="panel panel-primary">
							        				<h4 class="panel-heading" style="margin-top: 0; cursor:pointer;" ng-click="displayBeacon(beacon)" data-dismiss="modal">{{beacon.beacon_name}}</h4>
							        				<div class="panel-body center-block">
							        					<h4 class="text-left"><label class="label label-info">Type:</label> {{beacon.beacon_type}}</h4>
							        					<h4 class="text-left"><label class="label label-info">Associated:</label> {{beacon.associated}}</h4>
							        					<h4 class="text-left"><label class="label label-info">Altitude:</label> {{beacon.altitude | number: 3}}</h4>
								        				<h4 class="text-left"><label class="label label-info">Latitude:</label> {{beacon.latitude | number: 3}}</h4>
								        				<h4 class="text-left"><label class="label label-info">Longitude:</label> {{beacon.longitude | number: 3}}</h4>
							        				</div>
							        				<div class="panel-footer text-center">
							        					<label class="btn btn-danger text-center" ng-click="removeBeacon(beacon)">Delete <span class="glyphicon glyphicon-remove"></span></label>
							        				</div>
								        		</li>
								        	</ul>
							          	</div>
							          </form>
							        </div>
							        <div class="modal-footer">
							          <button type="submit" class="btn btn-info pull-right" data-dismiss="modal">Close</span></button>
							        </div>
							      </div>
							    </div>
							</div>

							<!-- Modal for removing an object -->
							  <div class="modal fade" id="removeObjectModal" role="dialog">
							    <div class="modal-dialog">
							    
							      <!-- Modal content-->
							      <div class="modal-content">
							        <div class="modal-header" style="padding:2em 3em;">
							          <button type="button" class="close" data-dismiss="modal">&times;</button>
							          <h3><b>Object deletion for {{curOrg.name}}</b></h3>
							        </div>
							        <div class="modal-body" style="padding:2em 3em;">
							          <form role="form">
							          	<div class="form-group text-primary">
							          		<ul class="list list-unstyled">
								        		<li ng-repeat="object in objectsArray" class="panel panel-primary">
							        				<h4 class="panel-heading" style="margin-top: 0; cursor:pointer;" ng-click="displayObject(object)" data-dismiss="modal">{{object.name}}</h4>
							        				<div class="panel-body row">
							        					<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 pull-left">
							        						<img class="img-thumbnail" src="{{object.thumbnail}}" alt="{{object.name}}" style="margin-bottom: 0.5em;"></img>
							        					</div>
							        					<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 pull-right text-left">
							        						<h4><label class="label label-info">#Images:</label> {{object.numImage}}</h4>
									        				<h4><label class="label label-info">#Audio:</label> {{object.numAudio}}</h4>
									        				<h4><label class="label label-info">#Video:</label> {{object.numVideo}}</h4>
									        				<h4><label class="label label-info">#3D:</label> {{object.num3D}}</h4>
							        					</div>
							        				</div>

							        				<div class="panel-footer">
							        					<label class="btn btn-danger text-center" ng-click="removeObject(object)">Delete <span class="glyphicon glyphicon-remove"></span></label>
							        				</div>
								        		</li>
								        	</ul>
							          	</div>
							          </form>
							        </div>
							        <div class="modal-footer">
							        	<label class="label label-warning pull-left">Warning: All media associated with the object will also be removed.</label>
							          <button type="submit" class="btn btn-info pull-right" data-dismiss="modal">Close</span></button>
							        </div>
							      </div>
							    </div>
							</div>
			 			</div>

			 			<!-- Stats -->
			 			<div ng-switch-when="stats">
			 				<div id="googleMapsStats" class="panel"></div>
			 			</div>
			 		</div>
			 	</div>

			 	<!-- Global Modals -->

			 	<!-- Modal for creating an beacon-->
				  <div class="modal fade" id="addBeaconModal" role="dialog">
				    <div class="modal-dialog">
				    
				      <!-- Modal content-->
				      <div class="modal-content">
				        <div class="modal-header text-primary text-center" style="padding:2em 3em;">
				          <button type="button" class="close" data-dismiss="modal">&times;</button>
				          <h3><b>Beacon creation for {{curOrg.name}}</b></h3>
				        </div>
				        <div class="modal-body" style="padding:2em 3em;">
				          <form role="form">
				            <div class="form-group">
				              <label>Name:</label>
				              <input type="text" class="form-control" placeholder="Enter beacon's name" ng-model="addBeaconName" required>
				            </div>
				            <div class="form-group form-group-sm">
				            	<label>Type:</label>
							    <select ng-model="addBeaconType" class="form-control input-sm" required>
							    	<option value="" disabled selected hidden>Select beacon type</option>
							    	<option ng-repeat="type in beaconTypes" value={{type}}>{{type}}</option>
							    </select>
				            </div> 
				            <div class="form-group panel panel-default text-center">
				            	<h4><label>Location:</label></h4>
				            	<div id="googleMapsAddBeacon" class="panel-body">
				            	</div>
				            	<h5 class="panel-body zeroPadding">Click a position on the map to the determine the beacon's location.</h5>
				            	<h6 class="panel-body text-muted zeroPadding">Note: Blue circles indicates a beacon's maximum service range.</h6>
				            </div>
				            <button type="submit" class="btn btn-success btn-block" ng-click="addBeacon(addBeaconName, addBeaconType)" data-dismiss="modal">Create</button>
				          </form>
				        </div>
				        <div class="modal-footer">
				          <button type="submit" class="btn btn-info pull-right" data-dismiss="modal">Close</button>
				        </div>
				      </div>
				    </div>
				</div>
			</div>
			<footer class="text-center footer text-muted">
				<h6>© 2017 Aura Technologies Inc.</h6>
				<a href="http://www.auracr.io/" class="text-info" target="_blank">auracr.io</a>
			</footer>
		</div>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<script src="https://www.gstatic.com/firebasejs/4.1.1/firebase.js"></script>
		<script src="scripts/controller.js"></script>
	</body>
</html>
